"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useDebugInformation = void 0;
const react_1 = require("react");
const useRenderCount_1 = require("./useRenderCount");
function useDebugInformation(componentName, props) {
    const count = (0, useRenderCount_1.useRenderCount)();
    const changedProps = (0, react_1.useRef)({});
    const previousProps = (0, react_1.useRef)(props);
    const lastRenderTimestamp = (0, react_1.useRef)(Date.now());
    const propKeys = Object.keys({ ...props, ...previousProps });
    changedProps.current = propKeys.reduce((obj, key) => {
        if (props[key] === previousProps.current[key])
            return obj;
        return {
            ...obj,
            [key]: { previous: previousProps.current[key], current: props[key] },
        };
    }, {});
    const info = {
        count,
        changedProps: changedProps.current,
        timeSinceLastRender: Date.now() - lastRenderTimestamp.current,
        lastRenderTimestamp: lastRenderTimestamp.current,
    };
    (0, react_1.useEffect)(() => {
        previousProps.current = props;
        lastRenderTimestamp.current = Date.now();
        console.log('[debug-info]', componentName, info);
    });
    return info;
}
exports.useDebugInformation = useDebugInformation;
//# sourceMappingURL=useDebugInformation.js.map