"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useDarkMode = void 0;
const react_1 = require("react");
const useMediaQuery_1 = require("./useMediaQuery");
const useStorage_1 = require("./useStorage");
const misc_1 = require("@utilities/misc");
function useDarkMode() {
    const [darkMode, setDarkMode] = (0, useStorage_1.useLocalStorage)('useDarkMode', false);
    const prefersDarkMode = (0, useMediaQuery_1.useMediaQuery)(misc_1.matchDarkMode);
    const enabled = darkMode ?? prefersDarkMode;
    const handleChange = (0, react_1.useCallback)(({ matches }) => {
        setDarkMode(matches);
    }, []);
    (0, react_1.useEffect)(() => {
        const list = window.matchMedia(misc_1.matchDarkMode);
        list.addEventListener('change', handleChange);
        return () => list.removeEventListener('change', handleChange);
    }, []);
    (0, react_1.useEffect)(() => {
        document.body.classList.toggle('dark-mode', enabled);
    }, [enabled]);
    return [enabled, setDarkMode];
}
exports.useDarkMode = useDarkMode;
//# sourceMappingURL=useDarkMode.js.map