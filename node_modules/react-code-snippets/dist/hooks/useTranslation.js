"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useTranslation = void 0;
const useStorage_1 = require("./useStorage");
function getNestedTranslation(language, keys, translations) {
    return keys.reduce((obj, key) => {
        if (typeof obj === 'string')
            return obj;
        return obj?.[key];
    }, translations[language]);
}
function useTranslation(translations) {
    const [language, setLanguage] = (0, useStorage_1.useLocalStorage)('language', 'en');
    const [fallbackLanguage, setFallbackLanguage] = (0, useStorage_1.useLocalStorage)('fallbackLanguage', 'en');
    const translate = (key) => {
        const keys = key.split('.');
        return (getNestedTranslation(language ?? '', keys, translations) ??
            getNestedTranslation(fallbackLanguage ?? '', keys, translations) ??
            key);
    };
    return {
        language,
        setLanguage,
        fallbackLanguage,
        setFallbackLanguage,
        t: translate,
    };
}
exports.useTranslation = useTranslation;
//# sourceMappingURL=useTranslation.js.map